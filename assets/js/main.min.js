window.onload=(()=>{function t(t,e){fetch(`./assets/data/${t}.json`).then(t=>t.json()).then(t=>(null!=e&&e(t),t)).then(e=>(localStorage.setItem(`${t}Local`,JSON.stringify(e)),e)).then(t=>t)}function e(t){l("nav-warpper",t),n("navbar-container"),I("shopping-card","id","click",A),I("card-close","id","click",$),E()}function n(t){let e=document.getElementById(`${t}`),n=document.createElement("li"),i=document.createElement("i");i.setAttribute("class","fa-solid fa-basket-shopping"),i.setAttribute("id","shopping-card"),n.appendChild(i);let l=document.createElement("span");l.setAttribute("id","incard-product-number"),n.appendChild(l),e.appendChild(n),M()}function l(t,e){let n=document.getElementById(`${t}`),i=document.createElement("ul");i.setAttribute("id","navbar-container"),i.setAttribute("class","navbar-list");for(let t of e){let e=document.createElement("li"),n=document.createElement("a"),l=document.createTextNode(`${t.name}`);n.append(l),n.setAttribute("href",`${t.link}`),e.appendChild(n),i.appendChild(e)}n.appendChild(i)}function d(t){let e=[],n=document.querySelectorAll(".brands-filter-item:checked");for(let t of n)e.push(parseInt(t.value));return 0!=e.length?t.filter(function(t){for(let n of e)if(t.brandID==n)return t}):t}function a(t){let e=[],n=document.querySelectorAll(".category-filter-item:checked");for(let t of n)e.push(parseInt(t.value));return 0!=e.length?t.filter(function(t){for(let n of e)if(t.categoryID==n)return t}):t}function o(t){let e=[],n=document.querySelectorAll(".connection-type-filter-item:checked");for(let t of n)e.push(parseInt(t.value));return 0!=e.length?t.filter(function(t){for(let n of e)if(t.connectionTypeID==n)return t}):t}function r(t){t=d(t),t=a(t),t=o(t),t=v(t);let e="",n=document.getElementById("products");if(0!=t.length)for(let n of t)e+=`<div class="product">\n\t              <img src="${n.image.src}" alt="${n.image.alt}" />\n\t              <p class="product-category-name">${c(n.categoryID)}</p>\n\t              <p class="product-brandname">${u(n.brandID)}</p>\n\t              <p class="product-name">${n.name}</p>\n\t              <p class="product-description">${n.descript}</p>\n\t              <p class="product-reviews">Reviews: ${n.score}<i class="fa-solid fa-star"></i></p>\n\t              <div class="product-price">\n\t                <p>Price:</p>\n\t                <s class="product-price-old">${0!=n.price.discount?n.price.old+"$":""}</s>\n\t                <p class="product-price-new">${s(n.price.old,n.price.discount)}$</p>\n\t              </div>\n\t              <input class="product-add-to-card-btn" type="button" data-id="${n.id}" value="Add to card" />\n\t            </div>`;else e+='<div id="product-message">\n\t                <h2>There is no products with selected criteria!</h2>\n\t              </div>';n.innerHTML=e,q();let i=document.getElementById("reviews-range-place");if(null!=i){let t=document.getElementById("reviews-range-sllider");i.innerHTML=t.value/10}I("product-add-to-card-btn","class","click",T)}function c(t){let e=z("categoriesLocal"),n=e.filter(function(e){return e.id==t});return n[0].name}function s(t,e){let n=t*((100-e)/100);return n.toFixed(2)}function u(t){let e="",n=z("brandsLocal");for(let i of n)i.id==t&&(e+=`${i.name}`);return e}function m(){let t=z("productsLocal");r(t)}function p(t){b("Brands","brands-filter",t,"brands-filter-item")}function f(t){b("Category","category-filter",t,"category-filter-item")}function g(t){b("Connection","connection-type-filter",t,"connection-type-filter-item")}function b(t,e,n,i){let l="";l+=`<p>${t}</p>\n\t            <ul>`;let d=document.getElementById(e);for(let t of n)l+=`<li>\n\t                  <input type="checkbox" name="${t.name}" class="${i}" value="${t.id}" id="${t.name}">\n\t                  <label for="${t.name}">${t.name} </label>\n\t                </li>`;l+="</ul>",d.innerHTML=l,I(i,"class","change",m)}function h(){let t=document.getElementById("reviews-filter"),e='<p>Reviews</p>\n\t        <div class="slidecontainer">\n\t          <input type="range" min="10" max="50" value="1" class="slider reviews-filter-item" id="reviews-range-sllider" />\n\t          <p id="reviews-range-place"></p>\n\t        </div>';t.innerHTML=e;let n=document.getElementById("reviews-range-sllider"),i=document.getElementById("reviews-range-place");i.innerHTML="1",n.addEventListener("click",m)}function v(t){let e,n=document.getElementById("reviews-range-sllider");return e=null==n?1:n.value/10,t.filter(function(t){if(t.score>=e)return t})}function E(){let t=document.getElementById("footer"),e=document.createElement("div");e.setAttribute("class","wrapper");let n=document.createElement("div");z("navLinksLocal");n.setAttribute("id","footer-top");let i=document.createElement("div"),l=document.createElement("p"),d=document.createTextNode("© Copyright 2022");l.appendChild(d),i.appendChild(l),i.setAttribute("id","footer-bottom"),e.appendChild(n),e.appendChild(i),t.appendChild(e)}function y(t){let e=document.getElementById("footer-top");S(t,e,"footerNav","Navigation"),P()}function C(t){let e=document.getElementById("footer-top");S(t,e,"footerSocial","Social")}function L(t){let e=document.getElementById("footer-top");S(t,e,"footerDocument","Links")}function S(t,e,n,i){let l=document.createElement("div");l.setAttribute("id",`${n}`);let d=document.createElement("p"),a=document.createTextNode(`${i}`);d.appendChild(a),l.appendChild(d);let o=document.createElement("ul");l.appendChild(o);for(let e of t){let t=document.createElement("li"),n=document.createElement("a"),i=document.createTextNode(`${e.name}`);n.setAttribute("href",`${e.link}`),n.appendChild(i),t.appendChild(n),o.appendChild(t)}e.appendChild(l)}function I(t,e,n,i){if("id"==e){let e=document.querySelector(`#${t}`);e.addEventListener(`${n}`,i)}else{let e=document.querySelectorAll(`.${t}`);for(let t of e)t.addEventListener(`${n}`,i)}}function T(){let t=this.getAttribute("data-id");if(localStorage.getItem("addToCardList")){let e=z("addToCardList");e.filter(e=>e.id==t).length?x("Product already in card!"):(e.push({id:t,quantity:1}),x("Product added to card!"),localStorage.setItem("addToCardList",JSON.stringify(e)))}else{let e=[];e[0]={id:t,quantity:1},localStorage.setItem("addToCardList",JSON.stringify(e)),x("Product added to card!")}M(),q(),N()}function A(){let t=document.querySelector(".shopping-card-container");t.classList.add("shopping-card-active")}function $(){let t=document.querySelector(".shopping-card-container");t.classList.remove("shopping-card-active")}function x(t){let e=document.querySelector(".message");e&&e.parentNode.removeChild(e);let n=document.createElement("div");n.setAttribute("class","message");let i=document.createElement("p"),l=document.createTextNode(`${t}`);i.appendChild(l),n.appendChild(i);let d=document.getElementsByTagName("body");d[0].appendChild(n);var a=setInterval(()=>{null==n.parentElement?clearInterval(a):n.parentElement.removeChild(n)},5e3)}function M(){let t=document.getElementById("incard-product-number");if(localStorage.getItem("addToCardList")){let e=z("addToCardList").length;t.innerHTML=` (${e})`}else t.innerHTML=" (0)"}function q(){let t=z("addToCardList"),e=document.getElementById("card-products"),n=document.getElementById("checkout-product-list");if(e.innerHTML="",null!=t)for(let n of t){let t=document.createElement("div");t.setAttribute("class","card-product");let i=document.createElement("img");i.setAttribute("src",`${w(n.id,"image","src")}`),i.setAttribute("alt",`${w(n.id,"image","alt")}`),t.appendChild(i);let l=document.createElement("div");l.setAttribute("class","card-product-right"),t.appendChild(l);let d=document.createElement("p"),a=document.createTextNode(`${w(n.id,"name")}`);d.appendChild(a),l.appendChild(d);let o=document.createElement("p"),r=document.createTextNode(`${w(n.id,"brandID")}`);o.appendChild(r),l.appendChild(o);let c=document.createElement("p"),s=document.createTextNode(`${w(n.id,"price","new")}`);c.appendChild(s),l.appendChild(c);let u=document.createElement("div");u.setAttribute("class","card-product-tools"),l.appendChild(u);let m=document.createElement("div");m.setAttribute("class","card-product-quantity");let p=document.createElement("input");p.setAttribute("type","button"),p.setAttribute("class","quantityRegul"),p.setAttribute("data-id",`${n.id}`),p.setAttribute("value","-"),m.appendChild(p);let f=document.createElement("p"),g=document.createTextNode(`${n.quantity}`);f.appendChild(g),m.appendChild(f);let b=document.createElement("input");b.setAttribute("type","button"),b.setAttribute("class","quantityRegul"),b.setAttribute("data-id",`${n.id}`),b.setAttribute("value","+"),m.appendChild(b),u.appendChild(m);let h=document.createElement("i");h.setAttribute("class","fa fa-trash"),h.setAttribute("data-id",`${n.id}`),h.setAttribute("aria-hidden","true"),u.appendChild(h),e.appendChild(t)}else{let t=document.createElement("p"),n=document.createTextNode("Card is empty.");t.appendChild(n),t.setAttribute("id","empty-card"),e.appendChild(t)}if(null!=t&&null!=n){e=document.getElementById("checkout-product-list"),e.innerHTML="";for(let n of t){let t=document.createElement("div");t.setAttribute("class","card-product");let i=document.createElement("img");i.setAttribute("src",`${w(n.id,"image","src")}`),i.setAttribute("alt",`${w(n.id,"image","alt")}`),t.appendChild(i);let l=document.createElement("div");l.setAttribute("class","card-product-right"),t.appendChild(l);let d=document.createElement("p"),a=document.createTextNode(`${w(n.id,"name")}`);d.appendChild(a),l.appendChild(d);let o=document.createElement("p"),r=document.createTextNode(`${w(n.id,"brandID")}`);o.appendChild(r),l.appendChild(o);let c=document.createElement("p"),s=document.createTextNode(`${w(n.id,"price","new")}`);c.appendChild(s),l.appendChild(c),e.appendChild(t)}}else null!=n&&(e=document.getElementById("checkout-product-list"),e.innerHTML="");H(),N()}function B(){let t=z("addToCardList"),e=0,n=document.getElementById("card-total-price"),i=document.getElementById("checkout-total");if(null!=t&&"undefined"!=t){let i=t.map(function(t){let e=z("productsLocal");for(let n of e)if(n.id==t.id)return t.quantity*s(n.price.old,n.price.discount)});for(let t of i)e+=t;n.innerHTML=`Total: ${e.toFixed(2)}$`}null!=i&&"undefined"!=t&&(i.innerHTML=`Total: ${e.toFixed(2)}$`)}function k(t,e=null){let n=z("addToCardList"),i=n.filter(function(e){return e.id==t});if(null==e){let n=z("productsLocal"),i=n.filter(function(e){return e.id==t});e=s(i[0].price.old,i[0].price.discount)}let l=i[0].quantity*e;return`${e}$ x ${i[0].quantity} = ${l.toFixed(2)}$`}function w(t,e,n=null){let i=z("productsLocal"),l=i.filter(function(e){return e.id==t});if("brandID"==e){let t=z("brandsLocal");for(let e of t)if(l[0].brandID==e.id)return e.name}return"price"==e?k(l[0].id,l[0][e][n]):null!=n?l[0][e][n]:l[0][e]}function N(){let t=document.querySelectorAll(".quantityRegul");for(let e of t)e.addEventListener("click",function(){let t=z("addToCardList");if("+"==this.value)for(let e of t)e.id==this.getAttribute("data-id")&&(e.quantity+=1,localStorage.setItem("addToCardList",JSON.stringify(t)),this.parentElement.getElementsByTagName("p")[0].innerHTML=e.quantity);else for(let e of t)e.id==this.getAttribute("data-id")&&e.quantity>1&&(e.quantity-=1,localStorage.setItem("addToCardList",JSON.stringify(t)),this.parentElement.getElementsByTagName("p")[0].innerHTML=e.quantity);B(),k(e.getAttribute("data-id")),q()})}function H(){let t=document.querySelectorAll(".fa-trash");for(let e of t)e.addEventListener("click",()=>{let t=z("addToCardList");for(let n of t)if(n.id==e.getAttribute("data-id")){let e=t.filter(function(t){return t.id!==`${n.id}`});localStorage.setItem("addToCardList",JSON.stringify(e))}0==z("addToCardList").length&&localStorage.removeItem("addToCardList"),q(),x("Product deleted from card!")});B()}function F(){localStorage.removeItem("addToCardList"),x("Deleted all products from card"),q(),B()}function z(t){let e=JSON.parse(localStorage.getItem(`${t}`));return e}function D(){let t=document.querySelectorAll(".brands-filter-item"),e=document.querySelectorAll(".category-filter-item"),n=document.querySelectorAll(".connection-type-filter-item"),i=document.getElementById("sort-product-placeholder");i.selectedIndex=0,O(t),O(e),O(n);let l=document.getElementById("reviews-range-sllider");l.value=1;let d=z("productsLocal");r(d)}function O(t){for(let e of t)e.checked=!1}function R(t){t.addEventListener("change",function(){let t=z("productsLocal");t.sort(function(t,e){if(0==U.value)return 0;if(1==U.value){if(t=parseFloat(s(t.price.old,t.price.discount)),e=parseFloat(s(e.price.old,e.price.discount)),t<e)return-1;if(t>e)return 1;if(t==e)return 0}else{if(2==U.value)return t=parseFloat(s(t.price.old,t.price.discount)),e=parseFloat(s(e.price.old,e.price.discount)),t>e?-1:t<e?1:0;if(3==U.value)return t.name<e.name?-1:t.name>e.name?1:0;if(4==U.value)return t.name>e.name?-1:t.name<e.name?1:0}}),r(t)})}function J(t){let e=t.filter(function(t){return t.price.discount>=30});r(e)}function P(){let t=document.querySelectorAll('[href="#about-me.html"]');for(let e of t)e.addEventListener("click",()=>{document.getElementsByTagName("body");let t=document.getElementsByTagName("header"),e=document.querySelector("#about-me-container");null==e&&(t[0].innerHTML+='<section id="about-me-container">\n\t\t\t\t\t\t<div id="about-me">\n\t\t\t\t\t\t\t<div id="about-me-left">\n\t\t\t\t\t\t\t\t<img src="assets/img/nikola-timotic.png" alt="profile-img" />\n\t\t\t\t\t\t\t\t<div id="about-me-info">\n\t\t\t\t\t\t\t\t\t<ul id="about-me-info-content">\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\tMail:\n\t\t\t\t\t\t\t\t\t\t\t\t<a href="mailto:nt&#46;timotic&#64;gmail&#46;com">nt&#46;timotic&#64;gmail&#46;com</a>\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\tPhone:\n\t\t\t\t\t\t\t\t\t\t\t\t<a href="tel:060-123-4567">0601234567</a>\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<p>Index: <span>173/20</span></p>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t<ul id="about-social">\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<a href="https://www.facebook.com">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="fab fa-facebook-square"></i>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<a href="https://www.instagram.com">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="fab fa-instagram-square"></i>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<a href="https://www.linkedin.com/in/nikolatimotic/">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="fab fa-linkedin"></i>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id="about-me-right">\n\t\t\t\t\t\t\t\t<h2>About Me</h2>\n\t\t\t\t\t\t\t\t<div id="about-me-content">\n\t\t\t\t\t\t\t\t\t<p id="about-me-text">Hi, my name is Nikola. I’m a Web Developer located in Serbia. I have a passion for UI and UX design. I\'m quietly confident, naturally curious, and perpetually working on improving my chops one design problem at a time. I\'m a very well-organized person and a problem solver.</p>\n\t\t\t\t\t\t\t\t\t<div id="quote-box">\n\t\t\t\t\t\t\t\t\t\t<cite id="quote"></cite>\n\t\t\t\t\t\t\t\t\t\t<p id="author"></p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id="about-me-close">\n\t\t\t\t\t\t\t\t<div class="close cross" id="about-me-exit"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>',quoteGeneratorInterval=setInterval(Z,2e3),aboutMeModalRemoved=!1);let n=document.getElementById("about-me-close");n.addEventListener("click",()=>{t[0].removeChild(t[0].lastChild),aboutMeModalRemoved=!0,clearInterval(quoteGeneratorInterval)})})}function Z(){let t=z("quotesLocal");if(aboutMeModalRemoved)clearInterval(quoteGeneratorInterval);else{for(j=Math.floor(Math.random()*t.length);j==W;)j=Math.floor(Math.random()*t.length);document.getElementById("quote").innerHTML=t[j].quote,document.getElementById("author").innerHTML=t[j].author,W=j}}t("navLinks",e),t("categories"),t("brands"),t("connectionTypes"),t("quotes"),t("navLinks",y),t("socialLinks",C),t("documentLinks",L);const V=document.querySelectorAll(".product-add-to-card-btn");for(let t of V)t.addEventListener("click",function(){let t=this.getAttribute("data-id");if(localStorage.getItem("addToCardList")){let e=z("addToCardList");e.filter(e=>e.id==t).length?x("Product already in card!"):(e.push({id:t,quantity:1}),x("Product added to card!"),localStorage.setItem("addToCardList",JSON.stringify(e)))}else{let e=[];e[0]={id:t,quantity:1},localStorage.setItem("addToCardList",JSON.stringify(e))}M(),q()});I("delete-all-products","id","click",F),q();const G=window.location.pathname;if("/store.html"==G){t("products",r),t("brands",p),t("categories",f),t("connectionTypes",g),h();var U=document.getElementById("sort-product-placeholder");R(U);let e=document.getElementById("reset-filter");e.addEventListener("click",D)}else if("/index.html"==G||"/"==G){t("products",J);let e,n=0;const l=3,d=document.getElementsByClassName("slide");ShowSlide=(t=>{for(n=t==d.length?0:t<0?d.length-1:t,i=0;i<d.length;i++)d[i].style.display="none";SlideReset(),d[n].style.display="block"}),SlideReset=(()=>{window.clearInterval(e),setTimeout(function(){e=window.setInterval(function(){ShowSlide(n+=1)},1e3*l)},10)}),neg.addEventListener("click",function(){ShowSlide(n-=1)}),pos.addEventListener("click",function(){ShowSlide(n+=1)}),ShowSlide(n)}else if("/checkout.html"==G){q();let t=document.getElementById("contact-submit"),e=!0;t.addEventListener("click",()=>{const t=/^[A-ZČĆŽĐŠ][a-zćčžđš]{1,14}\s([A-ZČĆŽĐŠ][a-zćčžđš]{1,14})?\s?[A-ZČĆŽŠĐ][a-zćčžđš]{1,19}$/;let n,i,l,d=document.getElementById("fullName"),a=d.value;t.test(a)?(d.nextElementSibling.innerHTML="",d.nextElementSibling.setAttribute("class","good-form-element"),n=!0):(d.nextElementSibling.innerHTML="Full Name is not as expected",d.nextElementSibling.setAttribute("class","bad-form-element"),n=!1);const o=/^[a-zA-Z0-9]([a-z]|[0-9])+\.?-?_?([a-z]|[0-9])*\.?([a-z]|[0-9])*\@[a-z]{3,}\.([a-z]{2,4}\.)?([a-z]{2,4})$/g;let r=document.getElementById("email"),c=r.value;o.test(c)?(r.nextElementSibling.innerHTML="",r.nextElementSibling.setAttribute("class","good-form-element"),i=!0):(r.nextElementSibling.innerHTML="E-mail is not as expected!",r.nextElementSibling.setAttribute("class","bad-form-element"),i=!1);const s=/^[0-9]{5}$/;let u=document.getElementById("postal-code");postalCodeFieldValue=u.value,s.test(postalCodeFieldValue)?(u.nextElementSibling.innerHTML="",u.nextElementSibling.setAttribute("class","good-form-element"),postalCodeConfirm=!0):(u.nextElementSibling.innerHTML="Postal code is not as expected!",u.nextElementSibling.setAttribute("class","bad-form-element"),postalCodeConfirm=!1);const m=/^[A-Za-zČĆŽĐŠčćžđš'\.\-\s\,0-9]{3,}$/;let p=document.getElementById("address");streetAddressFieldValue=p.value,m.test(streetAddressFieldValue)?(p.nextElementSibling.innerHTML="",p.nextElementSibling.setAttribute("class","good-form-element"),streetAddressConfirm=!0):(p.nextElementSibling.innerHTML="Address is not as expected!",p.nextElementSibling.setAttribute("class","bad-form-element"),streetAddressConfirm=!1);let f=document.getElementById("accept-tos");1==f.checked?(f.nextElementSibling.nextElementSibling.innerHTML="",f.nextElementSibling.nextElementSibling.setAttribute("class","good-form-element"),acceptToSConfirm=!0):(f.nextElementSibling.nextElementSibling.innerHTML="You must accept our Terms Of Use!",f.nextElementSibling.nextElementSibling.setAttribute("class","bad-form-element"),acceptToSConfirm=!1);let g=document.getElementById("message");g.value.length>450?(g.nextElementSibling.innerHTML="Message can't be longer than 450 characters!",g.nextElementSibling.setAttribute("class","bad-form-element"),l=!1):g.value.length>0&&g.value.length<20?(g.nextElementSibling.innerHTML="Message can't be smaller then 20 characters!",g.nextElementSibling.setAttribute("class","bad-form-element"),l=!1):(g.nextElementSibling.innerHTML="",g.nextElementSibling.setAttribute("class","good-form-element"),l=!0);let b=z("addToCardList");n&&i&&postalCodeConfirm&&streetAddressConfirm&&acceptToSConfirm&&l&&e&&null!=b?(x("Mail sent!"),e=!1):0==e?x("Mail already sent!"):null==b&&x("Card is empty!")})}var j,W,X=document.getElementById("nav-close-container");X.addEventListener("click",()=>{document.getElementById("nav-close").classList.toggle("cross"),document.getElementById("navbar-container").classList.toggle("nav-active")})});